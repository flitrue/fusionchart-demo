/*
 FusionCharts JavaScript Library - KDtree
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.11.3-sr.1
 FusionCharts JavaScript Library - ZoomScatter Chart
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.11.3-sr.1
*/
(function(J){"object"===typeof module&&"undefined"!==typeof module.exports?module.exports=J:J(FusionCharts)})(function(J){J.register("module",["private","modules.renderer.js-kdtree",function(){function E(h){this.configure(h)}var g=this.hcLib,J=function(h,l){return h.x-l.x},I=function(h,l){return h.y-l.y},S=function(h,l,u,v,p){return Math.pow(u-h,2)+Math.pow(v-l,2)<=Math.pow(p,2)},W=Math.PI,Y=Math.cos,X=Math.sin,L=Math.max,G=Math.min,x=W/180,K=function(h,l,u,v,p,g){return u<=L(h,p)&&u>=G(h,p)&&v<=
L(l,g)&&v>=G(l,g)?!0:!1},V=function(h,l,u,v,p,g){l=(v-l)*(p-u);h=(u-h)*(g-v);isNaN(l)&&(l=0);isNaN(h)&&(h=0);h=l-h;return 0===h?0:0<h?1:2};E.prototype={configure:function(h){this.validatorFn=h?this.shapeValidator():this.defaultValidator()},defaultValidator:function(){var h=this;return function(l){var u=h.mousePoint;return l&&1>=Math.pow((l.x-u.x)/h.xLimit,2)+Math.pow((l.y-u.y)/h.yLimit,2)?!0:!1}},shapeValidator:function(){var h=this;return function(l){var u=h.mousePoint,v=l&&l.shapeInfo,p=!1,g,C=
u.x,u=u.y,z;switch(v&&v.type){case "circle":g=v.radius;p=S(C,u,l.x,l.y,g);break;case "arc":p=v.innerradius;g=v.radius;p=!S(C,u,l.x,l.y,p)&&S(C,u,l.x,l.y,g);break;case "polygon":g=v.radius;z=v.startAngle;v=v.sides;a:{p=l.x;l=l.y;var t,F=0,E,M,N,G,L;t=!1;if(S(C,u,p,l,g)&&3<=v){t=void 0===z?.5*W:z%360*x;L=2*W/v;E=p+g*Y(-t);G=l+g*X(-t);for(z=0;z<v;z++){t+=L;M=p+g*Y(-t);N=l+g*X(-t);var I=E,J=G,O=M,R=N,P=C,U=u,T=u,c=V(I,J,O,R,P,U),b=V(I,J,O,R,Infinity,T),a=V(P,U,Infinity,T,I,J),d=V(P,U,Infinity,T,O,R);
if(c!==b&&a!==d||0===c&&K(I,J,P,U,O,R)||0===b&&K(I,J,Infinity,T,O,R)||0===a&&K(P,U,I,J,Infinity,T)||0===d&&K(P,U,O,R,Infinity,T)){if(0===V(E,G,C,u,M,N)){p=K(E,G,C,u,M,N);break a}F++}E=M;G=N}t=0!==F%2}p=t}break;case "rect":p=l.x;g=l.y;l=p+(v.width||0);v=g+(v.height||0);p=C>=p&&C<=l&&u>=g&&u<=v;break;case "default":p=!1}return p}},buildKdTree:function(h){this.tree=this._buildKdTree(h,!1)},getNeighbour:function(h){var l=this.tree,u={x1:h.x-this.xLimit,x2:h.x+this.xLimit,y1:h.y-this.yLimit,y2:h.y+this.yLimit},
g=this.validatorFn;this.mousePoint=h;if(l)return this._searchBtwnLimit(u,l,!1,g)},_compair2closest:function(h,l){if(h){if(l)return l.i>h.i?l:h}else return l;return h},_searchBtwnLimit:function(h,l,u,g){var p,x,C,z;C=u?"x":"y";var t=u?h.x1:h.y1,F=u?h.x2:h.y2;if(l)return p=l.point1?l.point1[C]:F,x=l.point2?l.point2[C]:F,C=l.point3?l.point3[C]:F,g(l.point1)&&(z=this._compair2closest(z,l.point1)),p>=t&&l.left&&(z=this._compair2closest(z,this._searchBtwnLimit(h,l.left,!u,g))),p<=F&&l.middle1&&(g(l.point2)&&
(z=this._compair2closest(z,l.point2)),x>=t&&(z=this._compair2closest(z,this._searchBtwnLimit(h,l.middle1,!u,g))),x<=F&&l.middle2&&(g(l.point3)&&(z=this._compair2closest(z,l.point3)),C>=t&&(z=this._compair2closest(z,this._searchBtwnLimit(h,l.middle2,!u,g))),C<=F&&l.right&&(z=this._compair2closest(z,this._searchBtwnLimit(h,l.right,!u,g))))),z},_buildKdTree:function(h,l){var g,v,p;if(g=h&&h.length)return h.sort(l?J:I),7<g?(g=Math.floor(g/4),v=2*(g+1)-1,p=3*(g+1)-1,{left:this._buildKdTree(h.slice(0,g),
!l),point1:h[g],middle1:this._buildKdTree(h.slice(g+1,v),!l),point2:h[v],middle2:this._buildKdTree(h.slice(v+1,p),!l),point3:h[p],right:this._buildKdTree(h.slice(p+1),!l)}):{left:2<=g?{point1:h[0]}:void 0,point1:1<=g?1===g?h[0]:h[1]:void 0,middle1:3<=g?{point1:h[2]}:void 0,point2:4<=g?h[3]:void 0,middle2:5<=g?{point1:h[4]}:void 0,point3:6<=g?h[5]:void 0,right:7==g?{point1:h[6]}:void 0}},_setSearchLimit:function(g,l){this.xLimit=g;this.yLimit=l}};E.prototype.constructor=E;g.KdTree=E}]);J.register("module",
["private","modules.renderer.js-zoomscatter",function(){var E=this,g=E.hcLib,ca=g.parseTooltext,I=g.Raphael,S=E.window,W=g.addEvent,Y=g.removeEvent,X=S.MouseEvent,L=S.document,G=g.BLANKSTRING,x=g.pluck,K=g.pluckNumber,V=g.getFirstValue,h=g.toRaphaelColor,l=g.hasSVG,u=g.isIE,v=g.getFirstColor,p=g.hasTouch,Z="rgba(192,192,192,"+(u?.002:1E-6)+")",C=Math,z=C.round,t=C.min,F=C.max,aa=C.abs,M=C.cos,N=C.sin,da=C.floor,ea=2*Math.PI,fa=g.getMouseCoordinate,ga=g.POSITION_BOTTOM,O=g.chartAPI,R=g.HUNDREDSTRING,
C=!g.CREDIT_REGEX.test(S.location.hostname),P=function(c,b){var a=fa(b.linkedItems.container,c),d=a.chartX,e=a.chartY,f=b.config,n=f.canvasLeft,r=f.canvasTop,k=f.canvasLeft+f.canvasWidth,f=f.canvasHeight+f.canvasTop;a.insideCanvas=!1;a.originalEvent=c;d>n&&d<k&&e>r&&e<f&&(a.insideCanvas=!0);return a},U=function(c,b,a){var d;b&&c&&(a||(a={}),a.originalEvent&&(a=a.originalEvent),a.touches&&(a=a.touches[0]),b.dispatchEvent?(X?d=new X(c,{bubbles:!!a.bubbles,cancelable:!!a.cancelable,clientX:a.clientX||
a.pageX&&a.pageX-L.body.scrollLeft-L.documentElement.scrollLeft||0,clientY:a.clientY||a.pageY&&a.pageY-L.body.scrollTop-L.documentElement.scrollTop||0,screenX:a.screenX||0,screenY:a.screenY||0,pageX:a.pageX||0,pageY:a.pageY||0}):L.createEvent&&(d=L.createEvent("HTMLEvents"),d.initEvent(c,!!a.bubbles,!!a.cancelable)),d.eventName=c,d&&b.dispatchEvent(d)):L.createEventObject&&b.fireEvent&&(d=L.createEventObject(),d.eventType=c,d.eventName=c,b.fireEvent("on"+c,d)))},T=g.KdTree;O("zoomscatter",{standaloneInit:!0,
defaultDatasetType:"zoomscatter",applicableDSList:{zoomscatter:!0},highlightEnabled:!1,friendlyName:"ZoomScatter Chart",isXY:!0,defaultZeroPlaneHighlighted:!1,creditLabel:C,configure:function(){var c,b=this.config;O.scatter.configure.apply(this,arguments);c=this.jsonData.chart;b.stepZoom=1-K(c.stepzoom,25)/100;b.showToolBarButtonToolText=K(c.showtoolbarbuttontooltext,1);b.btnResetChartToolText=x(c.btnresetcharttooltext,"Reset Chart");b.btnZoomOutToolText=x(c.btnzoomouttooltext,"Zoom out to previous level");
b.btnZoomInToolText=x(c.btnzoomintooltext,"<strong>Zoom in</strong><br/>Or double-click on plot to zoom-in");b.btnSelectZoomToolText=x(c.btnselectzoomtooltext,"<strong>Select a region to zoom-in</strong><br/>Click to enable pan mode.");b.btnPanToolText=x(c.btnpantooltext,"<strong>Drag to move across chart</strong><br/>Click to enable select-zoom mode.")},_setAxisLimits:function(){var c=this.jsonData,b=this.components.xAxis,a=x(c.chart.xaxislabelmode,"categories"),c=c.categories&&c.categories[0],c=
(c&&c.category||[]).slice(),d,e=Infinity,f=-Infinity,n;if("auto"===a||0===c.length){O.mscartesian._setAxisLimits.call(this);a=b[0].getLimit();b[0].setAxisConfig({hasCategory:0});b[0].resetCategoryAxisComponents();for(d=0;d<c.length;d+=1)if(n=c[d].x)n<e&&(e=n),n>f&&(f=n);if(f>a.max||e<a.min)f=F(f,a.max),e=t(e,a.min),b[0].setDataLimit(f,e)}else b[0].resetNumericAxisComponents(),O.scatterBase._setAxisLimits.call(this)},_createAxes:function(){var c=this.components;O.scatter._createAxes.call(this,arguments);
c.yAxis[0].setAxisConfig({animateAxis:!1});c.xAxis[0].setAxisConfig({animateAxis:!1})},_spaceManager:function(){var c,b,a=this.config,d=this.components,e=d.xAxis&&d.xAxis[0];b=d.yAxis&&d.yAxis||[];var f,n,r=d.legend.config.legendPos,k=a.xDepth,m=a.yDepth,D=a.canvasBgDepth,H=a.canvasBaseDepth,l=a.canvasBasePadding,g=d.canvas.config.canvasBorderWidth,h=a.realTimeConfig&&a.realTimeConfig.showRTValue,q=a.borderWidth,y=a.canvasMarginTop,A=a.canvasMarginBottom,w=a.canvasMarginLeft,Q=a.canvasMarginRight,
d=a.minCanvasHeight,ba=a.minCanvasWidth;c=a.minChartWidth;var p=a.minChartHeight,t=a.height,u=a.width,v=a._initConfig||(a._initConfig={}),z=!1,x=a.origCanvasTopMargin,C=a.origCanvasBottomMargin,F,E,G=[];v.canvasLeft=a.canvasLeft;v.canvasWidth=a.canvasWidth;v.canvasHeight=a.canvasHeight;v.canvasTop=a.canvasTop;v.availableHeight=a.availableHeight;v.availableWidth=a.availableWidth;a.canvasWidth-2*q<c&&(n=(a.canvasWidth-c)/2);a.canvasHeight-2*q<p&&(f=(a.canvasHeight-p)/2);this._allocateSpace({top:f||
q,bottom:f||q,left:n||q,right:n||q});a.origCanvasWidth=a.canvasWidth;a.origCanvasLeft=a.canvasLeft;a.canvasRight=a.canvasLeft+a.canvasWidth;a.origCanvasRight=a.canvasRight;q=0;for(n=b.length;q<n;q++)f=b[q],c=.7*a.availableWidth,c=f&&f.placeAxis(c)||{},G.push({axisIndex:q,spaceTaken:c}),f&&this._allocateSpace(c);b=.7*a.canvasHeight;this._manageActionBarSpace&&this._allocateSpace(this._manageActionBarSpace(b));this._manageLegendSpace(void 0);m&&(this._allocateSpace({bottom:m}),a.shift=k+l+H);D&&this._allocateSpace({right:D});
a.canvasWidth-2*g<ba&&(E=(a.canvasWidth-ba)/2);this._allocateSpace({left:E||g,right:E||g});ba>u-w-Q&&(m=a.canvasWidth-ba,k=w+Q,w=a.canvasMarginLeft=m*w/k,Q=a.canvasMarginRight=m*Q/k);w=w>a.canvasLeft?w-a.canvasLeft:0;this._allocateSpace({left:w,right:Q>u-a.canvasRight?Q+a.canvasRight-u:0});b=r===ga?.6*a.canvasHeight:.6*a.canvasWidth;this._manageChartMenuBar(b);b=.2*a.availableHeight;this._allocateSpace(this._getSumValueSpace(b));b=.3*a.availableHeight;a.origCanvasHeight=a.canvasHeight;a.canvasBottom=
a.canvasTop+a.canvasHeight;a.origCanvasBottom=a.canvasBottom;a.origCanvasTop=a.canvasTop;a.realtimeEnabled&&(h?this._allocateSpace(this._realTimeValuePositioning(b)):this._hideRealTimeValue());b=.6*a.availableHeight;a.xAxisSpaceAllocation=r=e&&e.placeAxis(b);e&&this._allocateSpace(r);this._getDSspace&&this._allocateSpace(this._getDSspace(.4*a.canvasWidth));b=.3*a.availableHeight;this._manageScrollerPosition&&this._manageScrollerPosition(b);a.canvasHeight-2*g<d&&(F=(a.canvasHeight-d)/2);this._allocateSpace({top:F||
g,bottom:F||g});this._allocateSpace({bottom:H});d>t-y-A&&(z=!0,m=a.canvasHeight-d,k=y+A,y=a.canvasMarginTop=m*y/k,A=a.canvasMarginBottom=m*A/k);e=y>a.canvasTop?y-a.canvasTop:0;H=A>t-a.canvasBottom?A+a.canvasBottom-t:0;this._allocateSpace({top:e,bottom:H});z&&(k=x+C,z=a.canvasHeight,z>d&&(m=z-d,e=m*x/k,H=m*C/k),this._allocateSpace({top:e,bottom:H}));a.actualCanvasMarginTop=e;a.actualCanvasMarginLeft=w},_createToolBox:function(){var c,b,a,d,e,f,n,r,k,m=this,D=m.config;d=m.components;c=d.chartMenuBar;
b=d.actionBar;k=D.showToolBarButtonToolText;var H=D.stepZoom;c&&c.drawn||b&&b.drawn||(O.mscartesian._createToolBox.call(m),c=d.tb,b=c.graphics||(c.graphics={}),a=c.getAPIInstances(c.ALIGNMENT_HORIZONTAL),a=a.Symbol,d=(d.chartMenuBar||d.actionBar).componentGroups[0],e=b.zoomInButton=(new a("zoomInIcon",void 0,c.idCount++,c.pId)).attachEventHandlers({click:function(){m.zoom(H)},tooltext:k&&D.btnZoomInToolText||G}),f=b.zoomOutButton=(new a("zoomOutIcon",void 0,c.idCount++,c.pId)).attachEventHandlers({click:function(){var a=
D.viewPortHistory;1<a.length&&(a=a.slice(-2,-1)[0],m.updateVisual(a.x,a.y,a.scaleX,a.scaleY))},tooltext:k&&D.btnZoomOutToolText||G}),n=b.resetButton=(new a("resetIcon",void 0,c.idCount++,c.pId)).attachEventHandlers({click:function(){var a=D.viewPortConfig,b=m.graphics;1<D.viewPortHistory.length&&(a.isReset=!0,m.zoomSelection(0,0,D.canvasWidth,D.canvasHeight),D.viewPortHistory.splice(1),b.trackerGroup.attr({cursor:"default"}),m.updateButtonVisual(),m.updateSelectionBox(0,0,0,0));E.raiseEvent("zoomReset",
{},m.chartInstance,[m.chartInstance.id])},tooltext:k&&D.btnResetChartToolText||G}),r=b.toggleZoomInButton=(new a("zoomModeIcon",void 0,c.idCount++,c.pId)).attachEventHandlers({click:function(){m.toogleDragPan(!0)},tooltext:k&&D.btnSelectZoomToolText||G}),k=b.togglePanButton=(new a("panModeIcon",void 0,c.idCount++,c.pId)).attachEventHandlers({click:function(){m.toogleDragPan(!0)},tooltext:k&&D.btnPanToolText||G}),d.addSymbol(k,!0),d.addSymbol(r,!0),d.addSymbol(n,!0),d.addSymbol(f,!0),d.addSymbol(e,
!0))},_createLayers:function(){var c=this.graphics,b=this.components.paper;O.scatter._createLayers.call(this);!c.imageContainer&&(c.imageContainer=b.group("dataset-orphan",c.datasetGroup));this.__preDraw()},_dist:function(c,b){var a=this.components,d;d=a.xAxis[0];a=a.yAxis[0];if(c&&b)return d=(c.x-b.x)*d.getPVR(),a=(c.y-b.y)*a.getPVR(),Math.sqrt(Math.pow(d,2)+Math.pow(a,2))},__preDraw:function(){var c=this.graphics,b=c.imageContainer,a=this.config,d=a.canvasLeft,e=a.canvasTop,f=a.canvasWidth,n=a.canvasHeight,
r=this.jsonData.chart,k=this.linkedItems,k=k.eventListeners||(k.eventListeners=[]),m=this.linkedItems.container,D=this.components.paper;a.updateAnimDuration=500;b.transform("t"+d+","+e);b.attr({"clip-rect":d+","+e+","+f+","+n});a.status="zoom";a.maxZoomLimit=K(r.maxzoomlimit,1E3);a.viewPortHistory=[{scaleX:1,scaleY:1,x:0,y:0}];!c.trackerElem&&(c.trackerElem=D.rect(d,e,f,n,0,c.trackerGroup).attr({fill:Z,stroke:Z}));Y(m,p?"touchstart":"mousemove",this.searchMouseMove);k.push(W(m,"touchstart mousemove",
this.searchMouseMove,this));this.zoomPanManager(b)},searchMouseMove:function(c){var b,a,d,e=c.data,f=e.config,n=f.viewPortConfig;a=e.components;var r=a.xAxis[0],k=a.yAxis[0];e.linkedItems.container&&!f.isDragging&&((b=P(c,e))&&b.insideCanvas?(a=f.canvasTop,d=r.getAxisConfig("axisDimention").x||f.canvasLeft,n.lastMouseCoordinate={x:Number(r.getValue(b.chartX-d)),y:Number(k.getValue(b.chartY-a))},clearTimeout(n.neighbourSearchTimer),f.lastMouseEvent=c,n.neighbourSearchTimer=setTimeout(function(){f.isDragging||
e._bestNeighbour(n.lastMouseCoordinate)},100)):e.highlightPoint(!1))},updateSelectionBox:function(c,b,a,d){var e=this.config,f=this.graphics,n=this.components.paper,r=e.viewPortConfig,k=e.cursor,m=f.selectionBox,D=e.canvasRight,H=e.canvasLeft,g=e.canvasTop,l=e.canvasBottom,h=c<a?c:a,q=b<d?b:d,y=c>a?c:a,A=b>d?b:d,w=a-c,Q=b-d,k=k?0<w&&0<Q?"ne-resize":0>w&&0<Q?"nw-resize":0>w&&0>Q?"sw-resize":0<w&&0>Q?"se-resize":"default":"default",h=h<H?H:h>D?D:h,q=q<g?g:q>l?l:q,w=c===a&&b===d?0:(y>D?D:y<H?H:y)-h,
Q=c===a&&b===d?0:(A>l?l:A<g?g:A)-q;m?m.attr({x:h,y:q,width:w,height:Q,cursor:k}):f.selectionBox=n.rect(h,q,w,Q).attr({"stroke-width":1,stroke:"red",fill:"#00FF00",opacity:.2,cursor:k});f.trackerGroup.attr({cursor:k});e.cursor=k;r.selectionDimensions||(r.selectionDimensions={startX:0,endX:0,startY:0,endY:0});r.selectionDimensions.startX=c;r.selectionDimensions.endX=b;r.selectionDimensions.startY=a;r.selectionDimensions.endY=d},getValue:function(c){var b=this.config,a=this.components,d=b.viewPortConfig;
c=this.getOriginalPositions(c.x,c.y,c.x,c.y);var e=a.xAxis[0].config.axisRange,a=a.yAxis[0].config.axisRange,f=e.min,n=a.max;return{x:f+(c[0]-b.canvasLeft)/(b.canvasWidth*d.scaleX/(e.max-f)),y:n-(c[1]-b.canvasTop)/(b.canvasHeight*d.scaleY/(n-a.min))}},_getTouchViewPort:function(c,b,a){var d,e;e=this.config;var f=e.canvasLeft,n=e.canvasTop;d=e.canvasWidth;e=e.canvasHeight;var r=t(c[0].chartX,c[1].chartX)-f,k=t(c[0].chartY,c[1].chartY)-n,m=Math.abs(c[1].chartX-c[0].chartX);c=Math.abs(c[1].chartY-c[0].chartY);
var f=t(b[0].chartX,b[1].chartX)-f,D=t(b[0].chartY,b[1].chartY)-n,n=Math.abs(b[1].chartX-b[0].chartX)/m*a.scaleX;b=Math.abs(b[1].chartY-b[0].chartY)/c*a.scaleY;r=a.x+r/a.scaleX-f/n;a=a.y+k/a.scaleY-D/b;r=0>r?0:r;a=0>a?0:a;b=1>b?1:b;n=1>n?1:n;d-=d/n;e-=e/b;return{x:r>d?d:r,y:a>e?e:a,scaleX:n,scaleY:b}},getOriginalPositions:function(c,b,a,d){var e=this.config,f=e.viewPortConfig,n=f.scaleX,r=f.scaleY,k=f.x,f=f.y,m=t(c,a);c=F(c,a);a=t(b,d);b=F(b,d);c=c>e.canvasWidth?e.canvasWidth:c;b=b>e.canvasHeight?
e.canvasHeight:b;m=0>m?0:m;a=0>a?0:a;return[k+m/n,f+a/r,(c-m)/n,(b-a)/r]},zoomSelection:function(c,b,a,d){var e=this.config;a&&d&&(a=Math.abs(e.canvasWidth/a),d=Math.abs(e.canvasHeight/d),this.updateVisual(c,b,a,d))},toogleDragPan:function(c){var b=this.config,a=b.status;c&&(b.status="zoom"===a?"pan":"zoom",E.raiseEvent("zoomModeChanged",{panModeActive:b.status},this.chartInstance,[this.chartInstance.id]));this.updateButtonVisual()},updateManager:function(c){var b,a=this.components.dataset,d=a.length;
for(b=0;b<d;b+=1)a[b].draw(c);c||this._drawQuadrant()},zoomPanManager:function(){var c,b=[],a=[],d=this,e=d.config,f=d.graphics,n=d.components,r=n.xAxis[0],k=n.eventListeners||(n.eventListeners=[]),m=d.viewPortConfig,D=!1,H=0,g,l={},h=function(a){var b=a.chartX,d=a.chartY,c=r.getAxisConfig("axisDimention").x||e.canvasLeft,f=e.canvasTop,k=e.canvasRight,m=e.canvasBottom;b<c&&(a.chartX=F(b,c));b>k&&(a.chartX=t(b,k));d<f&&(a.chartY=F(d,f));d>m&&(a.chartY=t(d,m))},q={start:function(a){m=e.viewPortConfig;
p=a.touches?!0:!1;b[0]=P(a,d);d.updateSelectionBox(0,0,0,0);p&&(D=!1,c=a.touches.length,2===c&&(D=!0,l.x=m.x,l.y=m.y,l.scaleX=m.scaleX,l.scaleY=m.scaleY,b[0]=P(a.touches.item(0),d),b[1]=P(a.touches.item(1),d)));e.isDragging=!1;"pan"===e.status&&(e.panStartX=m.x,e.panStartY=m.y,b[0].insideCanvas&&f.trackerGroup.attr({cursor:"move"}))},on:function(c){var k,r,g,H;g=e.panStartX;var h=e.panStartY;k=m.scaleX;r=m.scaleY;var q=n.xAxis[0],B=n.yAxis[0];p=c.touches?!0:!1;a[0]=P(c,d);a[0].insideCanvas?"pan"===
e.status&&f.trackerGroup.attr({cursor:"move"}):f.trackerGroup.attr({cursor:"default"});p&&c&&(H=c.touches.length,2===H?(D=!0,a[0]=P(c.touches.item(0),d),a[1]=P(c.touches.item(1),d)):D=!1);!e.isDragging&&(!p||2<aa(a[0].chartX-b[0].chartX)||2<aa(a[0].chartY-b[0].chartY))&&(e.isDragging=!0,d.highlightPoint(!1),"zoom"===e.status&&(b[0].pointValue=d.getValue({x:b[0].chartX,y:b[0].chartY}),E.raiseEvent("selectionStart",{chartX:b[0].chartX,chartY:b[0].chartY,pageX:b[0].pageX,pageY:b[0].pageY,selectionTop:b[0].chartX+
e.canvasLeft,selectionLeft:b[0].chartY+e.canvasTop,selectionWidth:0,selectionHeight:0,startXVAlue:b[0].pointValue.x,startYVAlue:b[0].pointValue.y},d.chartInstance,[d.chartInstance.id])));if(e.isDragging)if(D){if(b[0].insideCanvas||b[1].insideCanvas)g=d._getTouchViewPort(b,a,l),d.updateVisual(g.x,g.y,g.scaleX,g.scaleY,!0)}else"zoom"===e.status?d.updateSelectionBox(b[0].chartX,b[0].chartY,a[0].chartX,a[0].chartY):"pan"!==e.status||1===k&&1===r||!b[0].insideCanvas||(c=b&&a[0].chartX-b[0].chartX,H=b&&
a[0].chartY-b[0].chartY,g-=c/k,h-=H/r,k=e.canvasWidth*(k-1)/k,r=e.canvasHeight*(r-1)/r,m.x=g>k?k:0>g?0:g,m.y=h>r?r:0>h?0:h,d.updateManager(),q.draw(),B.draw())},end:function(c){var k=P(c,d),m=r.getAxisConfig("axisDimention").x||e.canvasLeft,n=e.canvasTop,q;q=e.canvasWidth/4;var t=e.canvasHeight/4,k=isNaN(k.chartX)||isNaN(k.chartY)?a[0]||b[0]:k;if(e.isDragging){if(D){if(b[0].insideCanvas||b[1].insideCanvas)c=d._getTouchViewPort(b,a,l),d.updateVisual(c.x,c.y,c.scaleX,c.scaleY);D=!1}else"zoom"===e.status&&
(c=k,q=b[0],h(q),h(c),n=d.getOriginalPositions(q.chartX-m,q.chartY-n,c.chartX-m,c.chartY-n))&&(c.pointValue=d.getValue({x:c.chartX,y:c.chartY}),E.raiseEvent("selectionEnd",{chartX:c.chartX,chartY:c.chartY,pageX:c.pageX,pageY:c.pageY,selectionTop:c.chartX+e.canvasLeft,selectionLeft:c.chartY+e.canvasTop,selectionWidth:Math.abs(c.chartX-q.chartX),selectionHeight:Math.abs(c.chartY-q.chartY),startXVAlue:q.pointValue.x,startYVAlue:q.pointValue.y,endXValue:c.pointValue.x,endYValue:c.pointValue.y},d.chartInstance,
[d.chartInstance.id]),q.chartX!==c.chartX&&q.chartY!==c.chartY&&d.zoomSelection(n[0],n[1],n[2],n[3]),d.updateSelectionBox(0,0,0,0));e.isDragging=!1;c=a[0]||b[0];c.data=d;d.searchMouseMove(c)}else k.insideCanvas&&(H+=1,setTimeout(function(){H=0;g=void 0},500),2===H?(c&&c.touches?!0:!1)===g&&(m=k.chartX-m,n=k.chartY-n,n=d.getOriginalPositions(m-q,n-t,m+q,n+t),d.zoomSelection(n[0],n[1],n[2],n[3]),c.preventDefault()):g=c&&c.touches?!0:!1);f.trackerGroup.attr({cursor:"default"})}};k.push(W(d.linkedItems.container,
"pointerdrag",function(a){q[a.state](a.originalEvent)}))},_drawDataset:function(){var c,b=this.components.dataset,a=b.length;for(c=0;c<a;c+=1)b[c]._deleteGridImages(),b[c].graphics._grid={};this.updateVisual()},updateVisual:function(c,b,a,d,e){var f,n,r,k,m;f=this.config;var D=this.components,g=f.viewPortConfig;m=f.canvasWidth;var l=f.canvasHeight,h=m,B=l,q=f.viewPortHistory,B=q.slice(-1)[0],y=[],y=f.status,A=f._initConfig;n=D.xAxis[0];k=D.yAxis[0];r=this.graphics;D=(D=D.quadrant)&&D.graphics.container;
h=f.maxZoomLimit;g.x=isNaN(c)?c=B.x:c;g.y=isNaN(b)?b=B.y:b;g.scaleX=a||(a=B.scaleX);g.scaleY=d||(d=B.scaleY);a>h&&(g.x=c=t(c,m-m/h),g.scaleX=a=h);d>h&&(g.y=b=t(b,l-l/h),g.scaleY=d=h);if(e)this.updateManager(e);else for(1<a||1<d?("zoom"===y&&this.toogleDragPan(!0),a>=B.scaleX||d>=B.scaleY?(q.push({scaleX:a,scaleY:d,x:c,y:b}),y=["zoomed","zoomIn"]):(q.pop(),B=q.slice(-1)[0],g.x=B.x,g.y=B.y,g.scaleX=B.scaleX,g.scaleY=B.scaleY,y=["zoomed","zoomOut"])):(1<q.length&&q.pop(),"pan"===y&&this.toogleDragPan(!0),
y=["zoomed","zoomOut"]),this.toogleDragPan(),h=f.canvasWidth,B=f.canvasHeight,c&&(c=g.x*=h/m),b&&(g.y*=B/l),f.canvasLeft=A.canvasLeft,f.canvasWidth=A.canvasWidth,f.canvasHeight=A.canvasHeight,f.canvasTop=A.canvasTop,f.availableHeight=A.availableHeight,f.availableWidth=A.availableWidth,this._spaceManager(),this._postSpaceManagement(),this.updateManager(),n.draw(),k.draw(),this._drawCanvas(),m={"clip-rect":f.canvasLeft+","+f.canvasTop+","+f.canvasWidth+","+f.canvasHeight},f.viewPortConfig&&this.graphics.imageContainer.attr({x:f.canvasLeft,
y:f.canvasRight}),r.imageContainer.attr(m).transform("T"+f.canvasLeft+","+f.canvasTop),r.tracker&&r.tracker.attr(m),D&&D.attr(m),f=n.getValue(0),n=n.getValue(h),r=k.getValue(0),k=k.getValue(B),0===arguments.length&&(y=G),m=0;m<y.length;m+=1)"zoomed"===y[m]&&E.raiseEvent("zoomed",{level:q.length,startX:f,startY:r,endX:n,endY:k},this.chartInstance,[this.chartInstance.id]),"zoomIn"===y[m]?E.raiseEvent("zoomedIn",{level:q.length,startX:f,startY:r,endX:n,endY:k},this.chartInstance,[this.chartInstance.id]):
"zoomOut"!==y[m]||g.isReset||E.raiseEvent("zoomedOut",{level:q.length,startX:f,startY:r,endX:n,endY:k},this.chartInstance,[this.chartInstance.id]);this.highlightPoint(!1);g.isReset=!1},getFillColor:function(c,b){b=parseFloat(b/100);0>b?b=0:1<b&&(b=1);c||(c="#FFFFFF");if(u&&!l)return b?c:"transparent";c=c.replace(/^#?([a-f0-9]+)/ig,"$1");c=g.graphics.HEXtoRGB(c);c[3]=b.toString();return"rgba("+c.join(",")+")"},_bestNeighbour:function(c){var b=this.components,a=this.config,d=b.xAxis[0],e=b.yAxis[0],
f=this.jsonData.chart,n=a.canvasLeft,r=a.canvasTop,k,m,g,h,l,t,B,q,y,A,w,p;p=b.numberFormatter;y=b.dataset;for(k=y.length-1;0<=k;--k)if(b=y[k],w=b.config,m=w.showHoverEffect,q=w.showTooltip,b.components.kDTree&&b.visible&&(h=b.getElement(c),b=this._dist(c,h),!l||b<t))if(g=k,l=h,t=b,B=y[g]&&w.zoomedRadius||0,t<=B)break;t<=F(B+2,5)?(c=d.getPixel(l.x)-n,r=e.getPixel(l.y)-r,n=x(l.tooltext,w.plotToolText),b=y[g],w=b.config,y=w.tooltip.toolTipSepChar,t=w.tooltip.seriesNameInToolTip,B=l.x,k=l.y,l&&(A=p.yAxis(k),
p=p.xAxis(B),A=Number(q)?void 0!==n?ca(n,[4,5,6,7,8,9,10,11],{yaxisName:e.getAxisConfig("axisName"),xaxisName:d.getAxisConfig("axisName"),yDataValue:A,xDataValue:p},l,f,b.config):(t?w.seriesname?w.seriesname+y:"":"")+"x:"+p+y+"y:"+A:G),a.lastHoveredPoint!==l&&this.highlightPoint(m,c,r,l,g,A)):this.highlightPoint(!1)},highlightPoint:function(c,b,a,d,e,f){var n=this,r=n.config,k=n.components,m=n.graphics,l=k.paper,h=m.tracker,t=(k=k.dataset[e])&&k.config;e=k&&t.zoomedRadius||0;var p=k&&t.hoverCosmetics,
k=p&&p.fill,t=p&&p.borderColor,p=p&&p.borderThickness,B={},B=function(a){g.plotEventHandler.call(this,n,a)},q=function(a){g.plotEventHandler.call(this,n,a,"dataplotRollover")},y=function(a){g.plotEventHandler.call(this,n,a,"dataplotRollout")},A=d&&d.link;h||(h=m.tracker=l.circle(0,0,0,m.trackerGroup).attr({"clip-rect":r.canvasLeft+","+r.canvasTop+","+r.canvasWidth+","+r.canvasHeight}).click(B).trackTooltip(!0).hover(q,y));d&&h.data("eventArgs",{x:d.x,y:d.y,tooltip:f,link:A});r.lastHoveredPoint=d;
B=Number(c)?{r:e,fill:k,stroke:t,"stroke-width":p}:{r:e,fill:Z,stroke:Z,"stroke-width":0};B.cursor=A?"pointer":"";h.attr(B).tooltip(f).transform("t"+(b+r.canvasLeft)+","+(a+r.canvasTop));d&&U("mouseover",h&&h.node,r.lastMouseEvent)},zoom:function(c){var b,a,d=this.config,e=d.viewPortConfig;b=e.x;a=e.y;var f=d.canvasWidth,d=d.canvasHeight,n=f/e.scaleX,r=d/e.scaleY,e=n*c;c*=r;e=e>f?f:e;c=c>d?d:c;b=b+n/2-e/2;a=a+r/2-c/2;b=0>b?0:b;a=0>a?0:a;b=b+e>f?f-e:b;a=a+c>d?d-c:a;this.zoomSelection(b,a,e,c)},updateButtonVisual:function(){var c,
b,a,d;a=this.config;var e=this.components.tb.graphics;c=a.status;var f;1>=a.viewPortHistory.length?(a=["zoomOutButton","resetButton","togglePanButton"],d=["zoomInButton"],f="toggleZoomInButton"):(d=["resetButton","zoomOutButton","zoomInButton"],a=[],"zoom"===c?(d.push("togglePanButton"),f="toggleZoomInButton"):"pan"===c&&(d.push("toggleZoomInButton"),f="togglePanButton"));for(c=0;c<a.length;c+=1)b=a[c],e[b].node.attr({config:{hover:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"},
normal:{fill:"#FFFFFF",stroke:"#E3E3E3","stroke-width":1,cursor:"default"},disable:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3","stroke-opacity":1,cursor:"default"},pressed:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"}},fill:["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF",!0],"button-disabled":!1,stroke:"#E3E3E3","stroke-opacity":1});for(c=0;c<d.length;c+=1)b=d[c],e[b].node.attr({config:{hover:{fill:"#FFFFFF","stroke-width":1,stroke:"#aaaaaa",cursor:"pointer"},normal:{fill:"#FFFFFF",
stroke:"#C2C2C2","stroke-width":1,cursor:"pointer"},disable:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3","stroke-opacity":1,cursor:"pointer"},pressed:{fill:"#EFEFEF","stroke-width":1,stroke:"#C2C2C2",cursor:"pointer"}},"button-disabled":!1,fill:["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF",!0],stroke:"#C2C2C2","stroke-opacity":1});e[f].node.attr({config:{hover:{fill:"#EFEFEF","stroke-width":1,stroke:"#EFEFEF",cursor:"default"},normal:{fill:"#EFEFEF",stroke:"#E3E3E3","stroke-width":1,cursor:"default"},
disable:{fill:"#E6E6E6","stroke-width":1,stroke:"#E3E3E3","stroke-opacity":1,cursor:"default"},pressed:{fill:"#EFEFEF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"}},"button-disabled":!1,fill:["#EFEFEF","#EFEFEF","#EFEFEF","#EFEFEF",!0],stroke:"#E3E3E3","stroke-opacity":1})},_drawAxis:function(){}},O.scatterBase);J.register("component",["dataset","zoomscatter",{type:"zoomscatter",configure:function(){var c,b,a,d,e,f,n;f=this.chart;var r=f.config;d=f.jsonData.chart;var k=f.getFillColor,m=this.JSONData;
this.__base__.configure.call(this);f=this.config;b=this.components;c=x(m.anchorbordercolor,d.anchorbordercolor);f.anchorBorderThickness=x(m.anchorborderthickness,d.anchorborderthickness,c?1:0);b.kDTree=new T;f.chunkSize=Math.floor(t((m.data||[]).length/5,5E4));c=f.staticRadius=K(d.staticradius,0);f.radius=K(m.radius,m.anchorradius,d.radius,d.anchorradius,c?3:.5);n=f.showHoverEffect;c=v(x(m.plotfillhovercolor,m.hovercolor,d.plotfillhovercolor,d.hovercolor,f.anchorbgcolor));b=x(m.plotfillhoveralpha,
m.hoveralpha,d.plotfillhoveralpha,d.hoveralpha,R);a=v(x(m.plotfillhovercolor,m.hovercolor,d.plotfillhovercolor,d.hovercolor,c));e=x(m.plotfillhoveralpha,m.hoveralpha,d.plotfillhoveralpha,d.hoveralpha,R);d=K(m.borderhoverthickness,d.borderhoverthickness,1);f.hoverCosmetics={showHoverEffect:n,fill:k(c,b),borderColor:k(a,e),borderThickness:d};f.tooltip={toolTipVisible:r.showtooltip,seriesNameInToolTip:r.seriesnameintooltip,toolTipSepChar:r.tooltipsepchar};f.lastViewPort={}},draw:function(c){var b,a,
d;b=this.graphics;d=this.chart;a=d.components;var e=d.graphics.imageContainer,f=a.paper;d=d.config;var n=this.visible,r=d.viewPortConfig,k=this.config,m=k.lastViewPort||{},g=!1;b.container||(b.container=f.group("grid-container",e));n&&this._conatinerHidden?this.show():n||this._conatinerHidden||this.hide();if(c)this._pixelatedDraw();else{if(m.scaleX!==r.scaleX||m.scaleY!==r.scaleY)m.scaleX=r.scaleX,m.scaleY=r.scaleY,c=a.xAxis[0],b=a.yAxis[0],a=c.getPVR(),c=b.getPVR(),d=F(k.zoomedRadius=t(k.staticRadius?
k.radius:k.radius*t(r.scaleX,r.scaleY),d.canvasWidth/2,d.canvasHeight/2),2),this.components.kDTree._setSearchLimit(d/a,d/c),this._deleteGridImages(),this.graphics._grid={},g=!0;this._gridDraw(g)}},_pixelatedDraw:function(){var c,b,a,d,e,f=this.chart.config;a=this.config;d=this.graphics;var n=a.drawLine,g=a.lastViewPort||{},k=g.scaleX,m=g.scaleY;e=f.viewPortConfig;var h=e.scaleX,l=e.scaleY,g=this.graphics._grid||(this.graphics._grid=[]),k=h/k,m=l/m,l=f.canvasWidth*k,f=f.canvasHeight*m;a=a._batchDarwTimers;
d=d.container;clearTimeout(this.timer);if(a&&a.length)for(;a.length;)clearTimeout(a.shift());d.transform("t"+z(-e.x*e.scaleX)+","+z(-e.y*e.scaleY));for(c in g)if(e=g[c])for(b in e)(d=e[b])&&d.drawState&&(a=d.image,a.attr({x:d.xPixel*k,y:d.yPixel*m,width:l,height:f}),n&&(a=d.lineImage,a.attr({x:d.xPixel*k,y:d.yPixel*m,width:l,height:f})))},_deleteGridImages:function(){var c,b,a,d,e;b=this.config;var f=this.graphics,n=f._imagePool||(f._imagePool=[]),g=f._canvasPool||(f._canvasPool=[]),k=f._lineImagePool||
(f._lineImagePool=[]),m=f._lineCanvasPool||(f._lineCanvasPool=[]),l=f._grid||[];if((b=b._batchDarwTimers)&&b.length)for(;b.length;)clearTimeout(b.shift());for(a in l)if(e=l[a])for(d in e)(b=e[d])&&b.drawState&&(c=b.image,c.attr({src:"",width:0,height:0}),n.push(c),delete b.image,c=b.canvas,g.push(c),delete b.canvas,delete b.ctx,c=b.lineImage)&&(c.attr({src:"",width:0,height:0}),k.push(c),delete b.lineImage,c=b.lineCanvas,m.push(c),delete b.lineCanvas,delete b.lineCtx);delete f._grid},_gridDraw:function(c){var b=
this,a=b.graphics,d=b.config,e=b.chart.config.viewPortConfig;clearTimeout(d.timer);a.container.transform("t"+z(-e.x*e.scaleX)+","+z(-e.y*e.scaleY));c?b._gridManager():d.timer=setTimeout(function(){b._gridManager()},10)},_gridManager:function(){var c,b,a,d,e,f,n,g,k,m=this,l=m.config,h=m.graphics._grid,p=l._drawGrid||(l._drawGrid=[]),u=m.chart,B=u.config,u=u.components;e=B.viewPortConfig;f=e.scaleX;var q=e.scaleY;n=Math.ceil(q);d=Math.ceil(f);var y=u.xAxis[0],A=u.yAxis[0],u=y.getAxisConfig("axisDimention").axisLength||
B.canvasWidth,B=B.canvasHeight,w=y.config,v=A.config,z=w.axisRange.min,w=w.axisRange.max,x=v.axisRange.min,v=v.axisRange.max,C=(w-z)/f,E=(v-x)/q;b=l.radius*t(e.scaleX,e.scaleY)+l.plotCosmetics.borderWidth;y=aa(b/(u*e.scaleX/(y.max-y.min)));A=aa(b/(B*e.scaleY/(A.max-A.min)));b=u/f;k=B/q;c=t(1,b/10,k/10);var q={},G=[];f=e.x+c;b=e.x-c+b;g=e.y+c;c=e.y+k-c;e=m._getFocusedGrid(f,g);k=q[e.row]||(q[e.row]={});k[e.col]=!0;e=m._getFocusedGrid(b,g);k=q[e.row]||(q[e.row]={});k[e.col]=!0;e=m._getFocusedGrid(b,
c);k=q[e.row]||(q[e.row]={});k[e.col]=!0;e=m._getFocusedGrid(f,c);k=q[e.row]||(q[e.row]={});k[e.col]=!0;f=m._getFocusedGrid();e=f.row;f=f.col;b=F(e-1,0);e=t(e+1,n-1);n=F(f-1,0);f=t(f+1,d-1);d=v-b*E;for(g=b;g<=e;g+=1){h[g]||(h[g]={});b=z+n*C;for(k=n;k<=f;k+=1)c=h[g][k],c||(a=F(d-E,x),c=t(b+C,w),c=h[g][k]={xPixel:k*u,yPixel:g*B,xMinValue:b,yMinValue:a,xMaxValue:c,yMaxValue:d,drawState:0,xMinWPad:F(b-y,z),yMinWPad:F(a-A,x),xMaxWPad:t(c+y,w),yMaxWPad:t(d+A,v)}),c.drawState||(q[g]&&q[g][k]?p.push({row:g,
col:k}):G.push({row:g,col:k})),b+=C;d-=E}(p.length||G.length)&&m._drawGridArr(function(){l._drawGrid=G;m._drawGridArr()})},_getFocusedGrid:function(c,b){var a=this.chart.config,d=a.viewPortConfig,e=a.canvasWidth/d.scaleX,a=a.canvasHeight/d.scaleY,f=isNaN(c)?d.x+e/2:c,d=isNaN(b)?d.y+a/2:b;return{row:da(d/a),col:da(f/e)}},_drawGridArr:function(c){var b,a,d,e,f=this.chart;b=f.config;var g=f.components,l=b.viewPortConfig,k=this.config,m=k.drawLine,h=k._drawGrid,p=[],u=this.graphics.container,v=g.paper,
g=g.xAxis[0].getAxisConfig("axisDimention").axisLength||b.canvasWidth,B=b.canvasHeight,q=this.graphics._grid,y=this.graphics._imagePool||[],A=this.graphics._canvasPool||[],w=this.graphics._lineImagePool||[],z=this.graphics._lineCanvasPool||[],x=k.plotCosmetics,l=k.radius*t(l.scaleX,l.scaleY),f=(f.components.xAxis[0].getAxisConfig("axisDimention").x||b.canvasLeft)-b.canvasLeft;if(h.length){for(;h.length;)b=h.shift(),b=q[b.row][b.col],2!==b.drawState&&(b.drawState=2,m&&(b.lineImage=w.length?w.shift():
v.image("",u),b.lineImage.attr({x:b.xPixel+f,y:b.yPixel,width:g,height:B}),b.lineCanvas=A.length?d=z.shift():d=S.document.createElement("canvas"),d.setAttribute("width",g),d.setAttribute("height",B),e=b.lineCtx=d.getContext("2d"),e.fillStyle=x.fillStyle,e.strokeStyle=x.lineStrokeStyle,e.lineWidth=x.lineWidth),b.image=y.length?y.shift():v.image("",u),b.image.attr({x:b.xPixel+f,y:b.yPixel,width:g,height:B}),b.canvas=A.length?a=A.shift():a=S.document.createElement("canvas"),a.setAttribute("width",g),
a.setAttribute("height",B),e=b.ctx=a.getContext("2d"),1>l?(e.strokeStyle=x.fillStyle,e.lineWidth=.5):(e.fillStyle=x.fillStyle,e.strokeStyle=x.strokeStyle,e.lineWidth=x.borderWidth),p.push(b));k._batchDrawindex=this.JSONData.data&&this.JSONData.data.length-1||0;this._drawGridArrBatch(p,c,!k.animation.enabled)}else c&&c()},_drawGridArrBatch:function(c,b,a){var d,e,f,g,l,k,m,h,p,t,u,v,q,y,A,w,x=this;k=x.config;var C=x.chart.components;w=x.config;var E=w.drawLine;h=w.plotCosmetics;g=w._batchDrawindex;
f=x.components.data;l=g-w.chunkSize;var F=C.yAxis[0],G=w.zoomedRadius,C=C.xAxis[0].getPVR(),F=F.getPVR(),I=k.showRegressionLine,J=w._store||[],K=h.lineWidth||1>G;I&&(y=k.regLineColor,A=k.regressionLineThickness);for(h=0;h<c.length;h+=1)c[h].ctx.beginPath(),E&&c[h].lineCtx.beginPath();for(l=0>=l?0:l;g>=l;--g)if((u=f[g]&&f[g].config.setValue)&&!isNaN(u.x)&&!isNaN(u.y))for(h=0;h<c.length;h+=1)(d=c[h],v=d.xMinValue,q=d.yMaxValue,u.x<d.xMinWPad||u.x>d.xMaxWPad||u.y<d.yMinWPad||u.y>d.yMaxWPad||(p=d.ctx,
t=d.lineCtx,d=z((u.x-v)*C),e=z((q-u.y)*F),(m=J[d])||(m=J[d]={}),m[e]))||(m[e]=!0,E&&(m=0<=g-1&&f[g-1].config.setValue)&&(t.moveTo(z((m.x-v)*C),z((q-m.y)*F)),t.lineTo(d,e)),1>G?(p.moveTo(d,e),p.lineTo(d+1,e)):(p.moveTo(d+G,e),p.arc(d,e,G,0,ea)));for(h=0;h<c.length;h+=1)d=c[h],p=d.ctx,p.fill(),K&&p.stroke(),p.closePath(),E&&(t=d.lineCtx,t.fill(),K&&t.stroke(),t.closePath());w._batchDrawindex=g;if(0<=g){if(!a)for(h=0;h<c.length;h+=1)p=c[h].image,f=c[h].canvas,p.attr({src:f.toDataURL("image/png")}),w.drawLine&&
(y=c[h].lineImage,A=c[h].lineCanvas,y.attr({src:A.toDataURL("image/png")}));(w._batchDarwTimers||(w._batchDarwTimers=[])).push(setTimeout(function(){x.chart&&x._drawGridArrBatch(c,b,a)},0))}else{delete w._store;if(I)for(w=k.regressionData,h=0;h<c.length;h+=1)d=c[h],g=d.xMinValue,k=d.yMaxValue,p=d.image,f=d.canvas,p=d.ctx,f=(w[0].x-g)*C,l=(k-w[0].y)*F,g=(w[1].x-g)*C,k=(k-w[1].y)*F,p.beginPath(),p.strokeStyle=y,p.lineWidth=A,p.moveTo(f,l),p.lineTo(g,k),p.stroke(),p.closePath();for(h=0;h<c.length;h+=
1)d=c[h],p=d.image,f=d.canvas,d.drawState=1,p.attr({src:f.toDataURL("image/png")}),E&&(y=d.lineImage,A=d.lineCanvas,y.attr({src:A.toDataURL("image/png")}));x.tree||setTimeout(function(){x._buildKdTree()},250);b&&b()}},_buildKdTree:function(){var c=this.config;c._kdPoints=(this.JSONData.data||[]).slice();this.components.kDTree||(this.components.kDTree=new T);this.components.kDTree.buildKdTree(c._kdPoints);delete c._kdPoints},getElement:function(c){if(this.components.kDTree)return this.components.kDTree.getNeighbour(c)},
show:function(){var c=this.graphics,c=c&&c.container;this.visible=!0;this._conatinerHidden=!1;c.show()},hide:function(){var c=this.graphics,c=c&&c.container;this.visible=!1;this._conatinerHidden=!0;c.hide()},_addLegend:function(){var c=this.chart,b=c.jsonData.chart,a=this.config,d=this.JSONData,e=c.getFillColor,f=x(d.anchorbordercolor,b.anchorbordercolor),g=v(x(f,a.plotBorderColor)),f=K(d.anchorborderthickness,b.anchorborderthickness,f?1:0),l=v(x(d.anchorbgcolor,d.color,b.anchorbgcolor,a.plotColor)),
k=x(d.anchoralpha,d.alpha,b.anchoralpha,R),b=x(d.anchorbgalpha,d.alpha,b.anchorbgalpha,R),d={color:a.lineColor,alpha:a.lineAlpha},e=a.plotCosmetics={fillStyle:e(l,k*b/100),strokeStyle:e(g,k),borderWidth:f,lineWidth:a.lineThickness,lineStrokeStyle:h(d)};this.legendItemId=c.components.legend.addItems(this,this.legendInteractivity,{enabled:a.includeInLegend,type:this.type,fillColor:e.fillStyle,strokeColor:e.strokeStyle,anchorSide:2,strokeWidth:a.anchorBorderThickness,label:V(this.JSONData.seriesname)})},
_setConfigure:function(){var c,b,a,d,e,f,h,l,k,m=-Infinity,p=Infinity,u=Infinity,v=-Infinity,z=this.components.data||(this.components.data=[]);c=this.chart;var B=g.parseUnsafeString,q=this.config,y=this.JSONData,A=c.jsonData.chart,w=y.data||[],C=w.length,E=c.components.numberFormatter,I=B(A.yaxisname),J=B(A.xaxisname),O=q.lineDashed,P=q.lineDashStyle,L=q.parentYAxis,M=q.toolTipSepChar,N=q.seriesname;for(c=0;c<C;c+=1)d=w[c],a=z[c]||(z[c]={}),b=a.config||(a.config={}),b.setValue=e={x:E.getCleanValue(d.x),
y:E.getCleanValue(d.y),index:c},v=F(v,e.x),u=t(u,e.x),m=F(m,e.y),p=t(p,e.y),q.showRegressionLine&&this.pointValueWatcher(e.x,e.y,q.regressionObj),b.setLink=x(d.link),b.anchorProps=this._parseAnchorProperties(c),b.showValue=K(d.showvalue,q.showValues),b.dashed=K(d.dashed,O),b.color=x(d.color,q.lineColor),b.alpha=x(d.alpha,q.lineAlpha),b.dashStyle=b.dashed?P:"none",b.toolTipValue=f=E.dataLabels(e.y,L),b.setDisplayValue=k=B(d.displayvalue),l=b.formatedVal=x(d.toolTipValue,E.dataLabels(e.y,L)),h=E.xAxis(e.x),
b.displayValue=x(k,f),b.setTooltext=g.getValidValue(B(x(d.tooltext,q.plotToolText))),q.showTooltip?void 0!==b.setTooltext?(e=[4,5,6,7,8,9,10,11],h={yaxisName:I,xaxisName:J,yDataValue:l,xDataValue:h},d=ca(b.setTooltext,e,h,d,A,y)):null===l?d=!1:(d=N?N+M:G,d+=e.x?h+M:G,d+=f):d=!1,b.toolText=d,a?a.graphics||(z[c].graphics={}):a=z[c]={graphics:{}},b.hoverEffects=this._parseHoverEffectOptions(a),b.anchorProps.isAnchorHoverRadius=b.hoverEffects.anchorRadius;q.xMax=v;q.xMin=u;q.yMin=p;q.yMax=m;q.showRegressionLine&&
(q.regressionData=this.getRegressionLineSeries(q.regressionObj,q.showYOnX,C));this.ErrorValueConfigure&&this.ErrorValueConfigure()}},"Scatter"]);I.addSymbol({zoomInIcon:function(c,b,a){c-=.2*a;b-=.2*a;var d=.8*a,e=I.rad(43),f=I.rad(48),g=c+d*M(e),e=b+d*N(e),h=c+d*M(f),f=b+d*N(f),k=I.rad(45),m=g+a*M(k),l=e+a*N(k),p=h+a*M(k)-1;a=f+a*N(k)-1;return["M",g,e,"A",d,d,0,1,0,h,f,"Z","M",g+1,e+1,"L",m,l,p,a,h+1,f+1,"Z","M",c-2,b,"L",c+2,b,"Z","M",c,b-2,"L",c,b+2,"Z"]},zoomModeIcon:function(c,b,a){var d=[];
c-=.2*a;b-=.2*a;var e=.8*a,f=I.rad(43),g=I.rad(48),h=c+e*M(f),f=b+e*N(f),k=c+e*M(g),g=b+e*N(g),l=I.rad(45),p=h+a*M(l),u=f+a*N(l),t=k+a*M(l)-1;a=g+a*N(l)-1;return d=d.concat(["M",h,f,"A",e,e,0,1,0,k,g,"Z","M",h+1,f+1,"L",p,u,t,a,t+1,a-1,t+1.5,a+1.5,t-1,a+1,t,a,k+1,g+1,"Z","M",c-2,b,"L",c+2,b,"Z","M",c,b-2,"L",c,b+2,"Z"])},panModeIcon:function(c,b,a){var d=c-11.25,d=c;a*=2.5;return[].concat(["M",d-a/16,b-a/8,"L",d+a/16,b-a/8,"L",d+a/16,b-a/3.2,"L",d+6*a/32,b-10*a/32,"L",d,b-a/2,"L",d-6*a/32,b-10*a/
32,"L",d-a/16,b-a/3.2,"Z","M",d+4*a/32,b-2*a/32,"L",d+10*a/32,b-2*a/32,"L",d+10*a/32,b-6*a/32,"L",d+16*a/32,b,"L",d+10*a/32,b+6*a/32,"L",d+10*a/32,b+2*a/32,"L",d+4*a/32,b+2*a/32,"Z","M",d+2*a/32,b+5*a/32,"L",d+2*a/32,b+10*a/32,"L",d+6*a/32,b+10*a/32,"L",d,b+16*a/32,"L",d-6*a/32,b+10*a/32,"L",d-2*a/32,b+10*a/32,"L",d-2*a/32,b+5*a/32,"Z","M",d-4*a/32,b-2*a/32,"L",d-10*a/32,b-2*a/32,"L",d-10*a/32,b-6*a/32,"L",d-16*a/32,b,"L",d-10*a/32,b+6*a/32,"L",d-10*a/32,b+2*a/32,"L",d-4*a/32,b+2*a/32,"Z"])}})}])});
